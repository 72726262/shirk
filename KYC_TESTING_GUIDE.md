# ุฏููู ุงุฎุชุจุงุฑ ูุธุงู KYC - ุงูุฎุทูุงุช ุงูุนูููุฉ

## โ ุงูุชุฃูุฏ ูู ุงูุชุนุฏููุงุช

### 1. ุงููููุงุช ุงูุชู ุชู ุชุนุฏูููุง:

- โ `android/app/src/main/AndroidManifest.xml` - ุฅุถุงูุฉ ุฃุฐููุงุช ุงููุงููุฑุง ูุงูุงุณุชุฏูู
- โ `lib/routes/route_generator.dart` - ุชุตุญูุญ ุงููุณุงุฑ ู ุงูุงุณู
- โ `lib/presentation/screens/kyc/kyc_verification_screen.dart` - UI ุฌุฏูุฏ ูุงูู
- โ `lib/data/repositories/kyc_repository.dart` - bucket ุตุญูุญ + ููุน ุงูุฑูุน ุงููุชูุฑุฑ

### 2. ุงูุฃุฐููุงุช ุงููุถุงูุฉ ูู AndroidManifest:

```xml
<uses-permission android:name="android.permission.CAMERA"/>
<uses-permission android:name="android.permission.READ_EXTERNAL_STORAGE"/>
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/>
<uses-permission android:name="android.permission.READ_MEDIA_IMAGES"/>
<uses-permission android:name="android.permission.READ_MEDIA_VIDEO"/>
```

## ๐งช ุฎุทูุงุช ุงูุงุฎุชุจุงุฑ

### ุงูุฎุทูุฉ 1: ุชุดุบูู ุงูุชุทุจูู
```bash
flutter clean
flutter pub get
flutter run
```

### ุงูุฎุทูุฉ 2: ุงููุตูู ูุดุงุดุฉ KYC

**ูู Profile Screen:**
1. ุงูุชุญ ุงูุชุทุจูู ููุณุชุฎุฏู ุนุงุฏู
2. ุงุฐูุจ ุฅูู "ุงูููู ุงูุดุฎุตู"
3. ุงุจุญุซ ุนู ุฒุฑ "ุงูุชุญูู ูู ุงููููุฉ" ุฃู "KYC"
4. ุงุถุบุท ุนููู

**ูุจุงุดุฑุฉ (ููุงุฎุชุจุงุฑ):**
```dart
Navigator.pushNamed(context, RouteNames.kycVerification);
```

### ุงูุฎุทูุฉ 3: ุงุฎุชุจุงุฑ Image Picker

#### ุงุฎุชุจุงุฑ ุงูุตูุฑุฉ ุงูุฃูุงููุฉ ููุจุทุงูุฉ:
1. ุงุถุบุท ุนูู ูุงุฑุช "ุตูุฑุฉ ุฃูุงููุฉ ูููููุฉ"
2. **ูุฌุจ** ุฃู ููุชุญ gallery ููุตูุฑ โ
3. ุงุฎุชุฑ ุฃู ุตูุฑุฉ
4. **ูุฌุจ** ุฃู ุชุธูุฑ ุงูุตูุฑุฉ ูู ุงููุงุฑุช โ
5. **ูุฌุจ** ุฃู ุชุธูุฑ ุนูุงูุฉ โ ุฎุถุฑุงุก โ

#### ุงุฎุชุจุงุฑ ุงูุณูููู:
1. ุงุถุบุท ุนูู ูุงุฑุช "ุตูุฑุฉ ุดุฎุตูุฉ (ุณูููู)"
2. **ูุฌุจ** ุฃู ุชูุชุญ ุงููุงููุฑุง โ
3. ุงูุชูุท ุตูุฑุฉ
4. **ูุฌุจ** ุฃู ุชุธูุฑ ุงูุตูุฑุฉ ูู ุงููุงุฑุช โ

### ุงูุฎุทูุฉ 4: ุงุฎุชุจุงุฑ ุงูู Validation

| ุงูุญูู | ุงุชุฑู ูุงุฑุบ | ุงููุชูุฌุฉ ุงููุชููุนุฉ |
|-------|-----------|-------------------|
| ุงูุฑูู ุงููุทูู | ูุนู | ุฑุณุงูุฉ ุฎุทุฃ โ |
| ุชุงุฑูุฎ ุงููููุงุฏ | ูุนู | ุฑุณุงูุฉ ุฎุทุฃ โ |
| ุตูุฑ ุงูุจุทุงูุฉ | ูุนู | ุฑุณุงูุฉ "ูุฌุจ ุฑูุน ุฌููุน ุงูุตูุฑ" โ |

### ุงูุฎุทูุฉ 5: ุงุฎุชุจุงุฑ ุงูุฑูุน ุงููุนูู

1. ุงููุฃ ุฌููุน ุงูุญููู
2. ุงุฑูุน ุงูุตูุฑ ุงูุซูุงุซุฉ ุงููุทููุจุฉ
3. ุงุถุบุท "ุฅุฑุณุงู ุทูุจ ุงูุชุญูู"
4. **ูุฌุจ** ุฃู ุชุฑู ุฑุณุงูุฉ "ุฌุงุฑู ุงูุฅุฑุณุงู..." โ
5. **ูุฌุจ** ุฃู ุชุฐูุจ ููู Supabase โ
6. **ูุฌุจ** ุฃู ุชุฑู ุฑุณุงูุฉ ูุฌุงุญ โ

### ุงูุฎุทูุฉ 6: ุงูุชุญูู ูู Supabase Dashboard

#### 6.1 ุงููููุงุช ูู Storage:
1. ุงูุชุญ Supabase Dashboard
2. ุงุฐูุจ ุฅูู Storage โ `kyc-documents` bucket
3. **ูุฌุจ** ุฃู ุชุฑู ูุฌูุฏ ุจุงุณู `{user_id}` โ
4. ุฏุงุฎู ุงููุฌูุฏ **ูุฌุจ** ุฃู ุชุฑู:
   - `id_front_{timestamp}.jpg` โ
   - `id_back_{timestamp}.jpg` โ
   - `selfie_{timestamp}.jpg` โ
   - `income_proof_{timestamp}.jpg` (ุฅุฐุง ุชู ุฑูุนู) โ

#### 6.2 ุงูุจูุงูุงุช ูู profiles table:
1. ุงุฐูุจ ุฅูู Table Editor โ `profiles`
2. ุงุจุญุซ ุนู ุงููุณุชุฎุฏู ุจุงูู `id`
3. **ูุฌุจ** ุฃู ุชุดุงูุฏ:
   - `kyc_status` = `'under_review'` โ
   - `kyc_submitted_at` = timestamp โ
   - `id_front_url` = ุฑุงุจุท ุงูููู โ
   - `id_back_url` = ุฑุงุจุท ุงูููู โ
   - `selfie_url` = ุฑุงุจุท ุงูููู โ
   - `national_id` = ุงูุฑูู ุงููุฏุฎู โ
   - `date_of_birth` = ุงูุชุงุฑูุฎ ุงููุฏุฎู โ

### ุงูุฎุทูุฉ 7: ุงุฎุชุจุงุฑ ููุน ุงูุฑูุน ุงููุชูุฑุฑ

1. ุจุนุฏ ุงูุฅุฑุณุงู ุงููุงุฌุญุ ุญุงูู ูุชุญ ุดุงุดุฉ KYC ูุฑุฉ ุฃุฎุฑู
2. **ูุฌุจ** ุฃู ุชุฑู ุฑุณุงูุฉ "ุทูุจู ููุฏ ุงููุฑุงุฌุนุฉ" ๐
3. **ูุฌุจ** ุฃูุง ุชุฑู ุงููููุฐุฌ โ
4. **ูุฌุจ** ุฃู ุชุฑู ููุท ุฒุฑ "ุงูุนูุฏุฉ" โ

## ๐ ุงุณุชูุดุงู ุงูุฃุฎุทุงุก ุงููุญุชููุฉ

### ุงููุดููุฉ: ุงููุงููุฑุง ูุง ุชูุชุญ

**ุงูุญู:**
1. ุชุฃูุฏ ูู ุชุดุบูู `flutter clean` ู `flutter run` ูุฑุฉ ุฃุฎุฑู
2. ุนูู Android 13+ุ ุชุฃูุฏ ูู ููุญ ุงูุฃุฐููุงุช ูุฏููุงู:
   - Settings โ Apps โ sharik โ Permissions
   - ููุญ ุฃุฐููุงุช ุงููุงููุฑุง ูุงูุตูุฑ
3. ุฌุฑุจ ุนูู emulator ุฃู ุฌูุงุฒ ุญูููู

### ุงููุดููุฉ: Gallery ูุง ููุชุญ

**ุงูุญู:**
1. ุชุญูู ูู AndroidManifest - ูุฌุจ ุฃู ุชุญุชูู ุนูู:
   ```xml
   <action android:name="android.intent.action.GET_CONTENT" />
   ```
2. ุฃุนุฏ ุชุดุบูู ุงูุชุทุจูู ุจุนุฏ `flutter clean`

### ุงููุดููุฉ: ุฎุทุฃ ุนูุฏ ุงูุฑูุน ุฅูู Supabase

**ุงูุฃุฎุทุงุก ุงููุญุชููุฉ:**
```
Error: Row Level Security policy violation
```
**ุงูุญู:** ุฃุถู Storage Policies (ููุฌูุฏุฉ ูู walkthrough.md)

```
Error: Bucket not found
```
**ุงูุญู:** ุชุฃูุฏ ูู ุฅูุดุงุก `kyc-documents` bucket ูู Supabase

```
Error: File too large
```
**ุงูุญู:** ุบูุฑ ุงูุฅุนุฏุงุฏุงุช ูู Supabase bucket (max 10MB)

### ุงููุดููุฉ: ุงูุตูุฑุฉ ูุง ุชุธูุฑ ุจุนุฏ ุงุฎุชูุงุฑูุง

**ุงูุญู:**
1. ุงูุญุต ุงูู console ููุฃุฎุทุงุก
2. ุชุฃูุฏ ูู ุฃู ุงูู File object ุตุญูุญ
3. ุฌุฑุจ ุนูู ุฌูุงุฒ ุญูููู ุจุฏูุงู ูู emulator

## ๐ฑ ุงูุงุฎุชุจุงุฑ ุนูู ููุตุงุช ูุฎุชููุฉ

### Android:
- โ ุชู ุงูุงุฎุชุจุงุฑ - ูุฌุจ ุฃู ูุนูู ุจุนุฏ ุงูุฅุตูุงุญุงุช
- ุงูุฃุฐููุงุช ููุฌูุฏุฉ ูู AndroidManifest

### iOS (ุฅุฐุง ููุช ุชุณุชุฎุฏูู):
ุฃุถู ูู `ios/Runner/Info.plist`:
```xml
<key>NSCameraUsageDescription</key>
<string>ูุญุชุงุฌ ูููุตูู ุฅูู ุงููุงููุฑุง ูุงูุชูุงุท ุตูุฑ ุงูุชุญูู ูู ุงููููุฉ</string>
<key>NSPhotoLibraryUsageDescription</key>
<string>ูุญุชุงุฌ ูููุตูู ูููุชุจุฉ ุงูุตูุฑ ูุฑูุน ุตูุฑ ุงูุชุญูู ูู ุงููููุฉ</string>
```

### Web:
- image_picker ูุนูู ุฌุฒุฆูุงู
- ุงููุงููุฑุง ูุฏ ูุง ุชุนูู ุนูู ุจุนุถ ุงููุชุตูุญุงุช
- Gallery ูุนูู ุนุงุฏุฉู

## โ Checklist ุงูููุงุฆู

ูุจู ุงูุฅุฑุณุงู ูููุณุชุฎุฏูููุ ุชุฃูุฏ ูู:

- [ ] ุงูุชุทุจูู ูุนูู ุจุฏูู ุฃุฎุทุงุก compilation
- [ ] ุงููุงููุฑุง ุชูุชุญ ุนูุฏ ุงูุถุบุท ุนูู "ุณูููู"
- [ ] Gallery ููุชุญ ุนูุฏ ุงูุถุบุท ุนูู ุตูุฑ ุงูุจุทุงูุฉ
- [ ] ุงูุตูุฑ ุชุธูุฑ ุจุนุฏ ุงุฎุชูุงุฑูุง
- [ ] ุงูู validation ูุนูู ููุญููู ุงููุทููุจุฉ
- [ ] Date picker ููุชุญ ููุนูู
- [ ] ุงูุฑูุน ุฅูู Supabase ูุนูู
- [ ] ุงููููุงุช ุชุธูุฑ ูู `kyc-documents` bucket
- [ ] ุงูุจูุงูุงุช ุชุญูุธ ูู `profiles` table
- [ ] ููุน ุงูุฑูุน ุงููุชูุฑุฑ ูุนูู
- [ ] ุฑุณุงุฆู ุงูุญุงูุงุช ูุงุถุญุฉ (under_review, approved, etc.)
- [ ] ุงูู UI ุฌููู ูุณูู ุงูุงุณุชุฎุฏุงู
- [ ] RTL ูุนูู ุจุดูู ุตุญูุญ
- [ ] Supabase Storage Policies ูุถุจูุทุฉ

## ๐ฏ ุงููุชูุฌุฉ ุงููุชููุนุฉ

ุฅุฐุง ูุฌุญุช ุฌููุน ุงูุฎุทูุงุช:
```
โ UI ุฌุฏูุฏ ุชูุงูุงู - ุญุฏูุซ ูุฌููู
โ ุงููุงููุฑุง ุชูุชุญ ููุณูููู
โ Gallery ููุชุญ ูุตูุฑ ุงูุจุทุงูุฉ
โ ุงูุตูุฑ ุชูุฑูุน ุฅูู kyc-documents bucket
โ ุงูุจูุงูุงุช ุชูุญูุธ ูู profiles table
โ ููุน ุงูุฑูุน ุงููุชูุฑุฑ ูุนูู
โ ุชุฌุฑุจุฉ ูุณุชุฎุฏู ุณูุณุฉ ููุฑูุญุฉ
```

**ูุจุฑูู! ุงููุธุงู ูุนูู 100% ๐**
