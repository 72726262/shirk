# دراسة مشروع Sharik - منصة الاستثمار العقاري

## 1. نظرة عامة على المشروع

### 1.1 الوصف
Sharik هي منصة استثمار عقاري متكاملة مبنية بتقنية Flutter، تتيح للمستخدمين الاستثمار في مشاريع عقارية متنوعة، مع نظام متكامل لإدارة المحافظ، التحقق من الهوية (KYC)، تتبع تقدم البناء، وإدارة الوثائق والعقود.

### 1.2 الهدف الرئيسي
توفير منصة سهلة الاستخدام وآمنة للاستثمار العقاري الجماعي في المملكة العربية السعودية، مع ضمان الشفافية في جميع مراحل الاستثمار من البداية حتى التسليم.

### 1.3 المنصات المدعومة
- الأنظمة: Android, iOS, Web, Windows, Linux, macOS
- اللغات: العربية (الأساسية) والإنجليزية
- الاتجاه: RTL (من اليمين لليسار)

## 2. البنية التقنية

### 2.1 التقنيات المستخدمة
- **Framework**: Flutter (SDK 3.10.8+)
- **اللغة**: Dart
- **قاعدة البيانات**: Supabase (PostgreSQL)
- **التخزين**: Supabase Storage
- **إدارة الحالة**: Flutter Bloc
- **الشبكة**: Dio, HTTP

### 2.2 المكتبات الرئيسية
#### إدارة الحالة
- flutter_bloc: ^8.1.6
- equatable: ^2.0.8

#### قاعدة البيانات
- supabase_flutter: ^2.8.2

#### واجهة المستخدم
- fl_chart: ^0.69.0 (الرسوم البيانية)
- shimmer: ^3.0.0 (تأثيرات التحميل)
- animations: ^2.0.11 (الأنيميشن)
- flutter_svg: ^2.0.10+1 (دعم SVG)
- dotted_border: ^2.1.0 (حدود منقطة)

#### الملفات والوسائط
- image_picker: ^1.2.1 (اختيار الصور)
- file_picker: ^10.3.10 (اختيار الملفات)
- cached_network_image: ^3.4.1 (تخزين الصور مؤقتاً)
- photo_view: ^0.15.0 (عرض الصور)
- video_player: ^2.9.2 (تشغيل الفيديو)
- carousel_slider: ^5.0.0 (عارض الصور المتحرك)

#### الخرائط والموقع
- google_maps_flutter: ^2.14.0
- flutter_map: ^8.2.2
- latlong2: ^0.9.1
- geolocator: ^14.0.2

#### PDF والوثائق
- pdf: ^3.10.0
- printing: ^5.10.2
- syncfusion_flutter_pdfviewer: ^28.1.33
- flutter_pdfview: ^1.4.4
- syncfusion_flutter_signaturepad: ^28.1.33 (التوقيع الإلكتروني)
- path_provider: ^2.1.5
- open_filex: ^4.5.0

#### أدوات مساعدة
- intl: ^0.20.2 (التنسيق الدولي)
- shared_preferences: ^2.2.1 (التخزين المحلي)
- uuid: ^4.5.1 (توليد المعرفات الفريدة)
- connectivity_plus: ^6.0.5 (فحص الاتصال بالإنترنت)
- http: ^1.2.2
- dio: ^5.7.0
- timeago: ^3.7.1 (عرض الوقت النسبي)
- pin_code_fields: ^8.0.1 (حقول رمز التحقق)
- device_preview: ^1.3.1 (معاينة الأجهزة)
- flutter_image_compress: ^2.4.0 (ضغط الصور)
- url_launcher: ^6.3.2 (فتح الروابط)
- share_plus: ^10.1.2 (المشاركة)
- table_calendar: ^3.1.2 (التقويم)

## 3. هيكل المشروع

### 3.1 البنية العامة
```
lib/
├── core/              # المكونات الأساسية
│   ├── config/       # إعدادات التطبيق
│   ├── constants/    # الثوابت (الألوان، الأبعاد)
│   ├── enums/        # التعدادات
│   ├── routes/       # المسارات
│   ├── services/     # الخدمات الأساسية
│   ├── theme/        # السمات
│   └── utils/        # الأدوات المساعدة
├── data/             # طبقة البيانات
│   ├── models/       # النماذج
│   ├── repositories/ # المستودعات
│   └── services/     # الخدمات
├── domain/           # طبقة المجال
│   └── usecases/     # حالات الاستخدام
├── presentation/     # طبقة العرض
│   ├── cubits/       # إدارة الحالة
│   ├── screens/      # الشاشات
│   └── widgets/      # المكونات
└── routes/           # المسارات
```

### 3.2 المكونات الأساسية
#### النماذج (Models)
- activity_log_model.dart
- admin_dashboard_stats.dart
- construction_update_model.dart
- contract_model.dart
- contract_template_model.dart
- defect_model.dart
- document_model.dart
- handover_model.dart
- installment_model.dart
- notification_model.dart
- project_model.dart
- reports_model.dart
- subscription_model.dart
- transaction_model.dart
- unit_model.dart
- user_model.dart
- wallet_model.dart

#### المستودعات (Repositories)
- admin_repository.dart
- auth_repository.dart
- construction_repository.dart
- contract_repository.dart
- document_repository.dart
- handover_repository.dart
- installment_repository.dart
- kyc_repository.dart
- maps_repository.dart
- notification_repository.dart
- project_repository.dart
- subscription_repository.dart
- user_repository.dart
- wallet_repository.dart

#### الخدمات (Services)
- admin_service.dart
- construction_service.dart
- contract_service.dart
- document_service.dart
- handover_service.dart
- notification_service.dart
- project_service.dart
- storage_service.dart
- subscription_service.dart
- supabase_service.dart
- wallet_service.dart

## 4. قاعدة البيانات

### 4.1 الجداول الرئيسية
#### المستخدمين والمصادقة
- **profiles**: معلومات المستخدمين الموسعة
  - البيانات الأساسية (الاسم، البريد، الهاتف)
  - بيانات الهوية (الرقم الوطني، تاريخ الميلاد)
  - حالة KYC (pending, under_review, approved, rejected)
  - الصور (avatar_url, id_front_url, id_back_url, selfie_url, income_proof_url)

#### نظام المحفظة
- **wallets**: محافظ المستخدمين
  - الرصيد الحالي والمحجوز
  - إجمالي الإيداعات والسحوبات والمدفوعات

- **transactions**: المعاملات المالية
  - أنواع المعاملات (deposit, withdrawal, payment, refund, commission)
  - حالة المعاملة (pending, processing, completed, failed, cancelled)
  - طرق الدفع (wallet, bank_card, bank_transfer, cash)

#### نظام المشاريع
- **projects**: المشاريع العقارية
  - المعلومات الأساسية (الاسم، الوصف)
  - الحالة (upcoming, in_progress, completed, on_hold, cancelled)
  - الموقع والمساحة
  - التكلفة والعائد المتوقع

- **units**: الوحدات في المشاريع
  - نوع الوحدة (شقة، فيلا، محل تجاري)
  - المساحة والسعر
  - حالة الوحدة (available, reserved, sold)

#### نظام البناء
- **construction_updates**: تحديثات البناء
  - الصور والفيديوهات
  - نسبة الإنجاز
  - التقرير المفصل

#### العقود والوثائق
- **contracts**: العقود
  - تفاصيل العقد
  - حالة التوقيع
  - روابط الملفات

- **documents**: الوثائق
  - نوع الوثيقة
  - حالة الموافقة
  - روابط التحميل

#### نظام التسليم
- **handovers**: عمليات التسليم
  - حالة التسليم
  - تاريخ التسليم
  - الملاحظات والعيوب

- **defects**: العيوب المكتشفة
  - وصف العيب
  - الصور
  - حالة الإصلاح

#### نظام الإشعارات
- **notifications**: الإشعارات
  - نوع الإشعار
  - المحتوى
  - حالة القراءة

### 4.2 سياسات الأمان (RLS Policies)
- كل مستخدم يمكنه الوصول لبياناته فقط
- المشرفون يمكنهم الوصول لجميع البيانات
- الحاويات العامة يمكن قراءتها من الجميع

### 4.3 التخزين (Storage Buckets)
- **project-images**: صور المشاريع (عام)
- **construction-media**: وسائط البناء (عام)
- **reports**: التقارير (خاص)
- **documents**: الوثائق (خاص)
- **kyc-documents**: وثائق التحقق من الهوية (خاص)
- **avatars**: صور الملفات الشخصية (عام)
- **signatures**: التوقيعات (خاص)
- **defect_photos**: صور العيوب (خاص)

## 5. الميزات الرئيسية

### 5.1 نظام المستخدمين
- التسجيل والدخول
- إدارة الملف الشخصي
- نظام الأدوار (client, admin, super_admin)
- التحقق من الهوية (KYC)

### 5.2 نظام المحفظة
- إيداع وسحب الأموال
- عرض الرصيد الحالي والمحجوز
- سجل المعاملات
- دعم طرق دفع متعددة

### 5.3 نظام المشاريع
- تصفح المشاريع
- عرض تفاصيل المشروع
- عرض الوحدات المتاحة
- الاستثمار في الوحدات
- تتبع تقدم البناء

### 5.4 نظام البناء
- تحديثات البناء
- عرض الصور والفيديوهات
- التقارير الدورية
- نسبة الإنجاز

### 5.5 العقود والوثائق
- إدارة العقود
- التوقيع الإلكتروني
- رفع وتحميل الوثائق
- عرض PDF

### 5.6 نظام التسليم
- جدولة التسليم
- تسجيل العيوب
- متابعة الإصلاحات
- تقرير التسليم النهائي

### 5.7 نظام الإشعارات
- إشعارات فورية
- إشعارات البريد الإلكتروني
- سجل الإشعارات

### 5.8 لوحة التحكم
- إدارة المستخدمين
- إدارة المشاريع
- إدارة المعاملات
- التقارير والإحصائيات

## 6. واجهة المستخدم

### 6.1 التصميم
- تصميم حديث وجذاب
- دعم RTL للعربية
- ألوان متناسقة
- أيقونات واضحة

### 6.2 المكونات
- أزرار مخصصة
- حقول إدخال
- بطاقات معلومات
- قوائم
- رسوم بيانية
- خرائط تفاعلية

### 6.3 التجربة
- تحميل سريع
- انتقالات سلسة
- رسائل خطأ واضحة
- حالات فارغة
- مؤشرات تحميل

## 7. الأمان

### 7.1 المصادقة
- نظام تسجيل دخول آمن
- إعادة تعيين كلمة المرور
- التحقق من البريد الإلكتروني

### 7.2 التحقق من الهوية (KYC)
- رفع صور الهوية
- صورة شخصية (سيلفي)
- إثبات الدخل
- مراجعة من قبل المشرفين

### 7.3 حماية البيانات
- تشفير البيانات الحساسة
- سياسات الوصول (RLS)
- تخزين آمن للملفات

## 8. الأداء

### 8.1 التحسينات
- تخزين مؤقت للصور
- ضغط الصور قبل الرفع
- تحميل تدريجي للبيانات
- فهرسة قاعدة البيانات

### 8.2 المراقبة
- تتبع الأخطاء
- مراقبة الأداء
- تحليلات الاستخدام

## 9. النشر

### 9.1 التحضير
- إزالة كود التصحيح
- تحسين الأصول
- تقليل حجم التطبيق

### 9.2 المنصات
- **Android**: APK و App Bundle
- **iOS**: IPA
- **Web**: استضافة سحابية

### 9.3 المراقبة بعد الإطلاق
- تتبع الأخطاء
- تحليلات الاستخدام
- أداء التطبيق

## 10. الخطة المستقبلية

### 10.1 الميزات القادمة
- دعم المزيد من اللغات
- تحسينات في واجهة المستخدم
- ميزات إضافية للاستثمار

### 10.2 التحسينات
- تحسين الأداء
- تقليل حجم التطبيق
- تحسين الأمان

## 11. الخلاصة

مشروع Sharik هو منصة استثمار عقاري متكاملة توفر تجربة مستخدم ممتازة مع نظام أمان قوي وميزات شاملة تغطي جميع جوانب الاستثمار العقاري من البداية حتى التسليم. البنية التقنية الحديثة والتصميم الجذاب يجعلانها خياراً ممتازاً للمستخدمين في المملكة العربية السعودية.

---

**تم إعداد هذه الدراسة بناءً على تحليل شامل لكود المشروع ومكوناته.**